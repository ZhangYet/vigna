* 需要复习的知识
** TCP
*** tcp 三次握手与四次挥手

*** 四次挥手中的状态

*** TCP 如何保障可靠性[fn:1]

** 语言相关
*** 线程/协程/进程

*** go 中 GMP 机制

**** 符号

- *G*: goroutine，其实是一个跟踪 goroutine 栈和状态的结构。
- *P*: logical process，获取 M 以运行 G
- *M*: 系统线程

**** M, P 和 G 之间的交互

based on http://morsmachine.dk/go-scheduler

*Q*: 为什么需要调度器

*A*: 1. pthreads 很多资源（比如 signal mask 和 CPU affinity）, goroutine 并不需要。2. 有了调度器，我们可以进行 informed scheduling decisions (OS 做不到)。

go scheduler 是 *M:N scheduler*, 多个 goroutine 跑在多个系统线程上。

符号：

- *M*: 系统进程

- *G*: goroutine

- *P*: context，或者可以理解成跟某个 M 绑定的 local scheduler

#+CAPTION: GMP 模型
#+NAME:   fig:SED-HR4049
[[http://morsmachine.dk/in-motion.jpg]]

对上图的解释：

#+BEGIN_QUOTE

Goroutines are added to the end of a runqueue whenever a goroutine executes a go statement. Once a context has run a goroutine until a scheduling point, it pops a goroutine off its runqueue, sets stack and instruction pointer and begins running the goroutine.

#+END_QUOTE

#+CAPTION: Go 调度中对 syscall 的处理
#+NAME:   fig:SED-HR4049
[[http://morsmachine.dk/syscall.jpg]]

如图所示，M0 进入 syscall block 的时候，调度器会将 M0 的 P 移到新的 P 去运行。注意到 M0 此时就没有 P 了，它需要在 syscall return 之后重新获取 P。如果可以，它会偷一个，如果不行，它会把 G 放到 global queue，然后 sleep。

*** go 垃圾回收机制

[[http://morsmachine.dk/machine-gc][难点]]： 正确处理引用（寄存器中的引用、多线程下以及事件循环中的引用）。

[[https://blog.golang.org/ismmkeynote][ISMM 的 keynote]]: GC 需要解决的问题——GC 延迟。

[[https://making.pusher.com/golangs-real-time-gc-in-theory-and-practice/][Go GC: theory and practice]]

*** python dict 实现

采用开放寻址，随机化探寻，初始化有8个 slot，超过一定比例的时候会 resize，resize 之后会扩展成比 4 * ma_used 大的2的幂。删除 key 的时候不会 resize。

[[https://www.laurentluce.com/posts/python-dictionary-implementation/][参考材料]]


** HTTP
*** HTTP 与 HTTPS 的区别

*** 常见 HTTP 状态码


** redis
*** [[https://redis.io/topics/distlock][redis 分布式锁]]

*Q*： 只用 redis SETEX 会有什么问题？

*A*： redis 倒霉催的挂了怎么破？即使我们有主从，但是因为主从是异步的，所以如果有 client 刚获得锁 master 就崩溃了，那么另外的 client 可以获得锁。

**  MySQL

*** MySQL 索引

*** primary key 跟 non-primary key 的区别

*** 为什么用 B+ 树

** 算法

*** 一致性哈希

 #+INCLUDE: "../notes/ita/chap11_hash_table.org" :minlevel 3

** Footnotes

[fn:1] [[https://juejin.im/post/5cf7ea91e51d4576bc1a0dc2][参考资料]] 
